<section class="content-header">
  <h1>
    Add New JS Exercise
    <small>Write an introducion and instructions foreach exercise. </small>
  </h1>
  <ol class="breadcrumb">
    <li><a ng-href="#/"><i class="fa fa-dashboard"></i> Home</a></li>
    <li><a ng-href="#/"><i class="fa fa-laptop"></i>JS Exercises</a></li>
    <li class="active"><a ng-href="#/addJSExercise"></i>New JS Exercise</a></li>
  </ol>
</section>

<!-- Main content -->
<section class="content">
	<div class="inner-page">	
		<div class="box box-primary">
			<div class="box-body">
				<form name="reviewForm" novalidate>
					<div class="form-group">
						<label for="exercise-name" class="test-name">Exercise name: </label>
						<input type="text" ng-model="exercise.name" id="exercise-name" class="form-control" required />
					</div>
					<h3>Item {{currentExercise + 1}}</h3>

					<div class="form-group">
						<label for="exercise-intro">Introduction: </label>
						<textarea rows="5" ng-model="exercise.exercises[currentExercise].introduction" id="exercise-intro" class="form-control" required ></textarea>
					</div>

					<div id="jsEditor" class="editor">{{exercise.exercises[currentExercise].html}}</div>
					<textarea id="js-content" ng-model="exercise.exercises[currentExercise].html"></textarea>

					<!-- create js console and call the script -->
					<div id="js-console"></div>
					<script src="javascripts/js-console.js"></script>
					<script>var console = {}
						console.log = jsConsole.writeLine;</script>

					<button id="btn-run" class="btn btn-danger">Run Script</button>
					


					<!-- script for storing the user JS code -->
					<script id="scriptContainer"></script>

					<div class="form-group">
						<label for="exercise-instructions">Instructions: </label>
						<textarea rows="5" ng-model="exercise.exercises[currentExercise].instructions" id="exercise-instructions" class="form-control"></textarea>
					</div>
					<div class="form-group">
						<label for="exercise-check">Check function: </label>
						<i>Write an function that returns true or false. For exapmle : 
							<pre>function(){ if ( (typeof sum != 'undefined') && (sum(4, 3)===7) ){ return true } else{ return false } }
						</pre> </i>
						<textarea rows="5" ng-model="exercise.exercises[currentExercise].checkFunction" id="exercise-check" class="form-control" required></textarea>
					</div>
					<div class="form-group">
						<label for="exercise-err">Specific error message </label>
						<textarea rows="5" ng-model="exercise.exercises[currentExercise].errorMsg" id="exercise-err" class="form-control"></textarea>
					</div>
				</form>
			</div>
			<div class="box-footer">
				<div class="row">
					<div class="col-md-6">
						<button ng-click="prevExercise()" class="btn btn-primary" ng-class="{ disabled : currentExercise == 0 }"> Previous Exercise </button>
					</div>
					<div class="col-md-6">
						<button ng-click="nextExercise()" class="btn btn-primary pull-right" ng-class="{ disabled : (currentExercise + 1) == exerciseCount }"> Next Exercise </button>	
					</div>
				</div>
				<div class="row">
					<div class="col-md-6">
						<button class="btn btn-success" ng-class="{disabled : !reviewForm.$valid}" ng-click="saveJSExercise()">Save</button>
					</div>
					<div class="col-md-6">
						<button ng-click="addNewExercise()" class="btn btn-success pull-right" ng-class="{ disabled : (exerciseCount != (currentExercise + 1)) || !reviewForm.$valid }"> Add New Exercise </button>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>